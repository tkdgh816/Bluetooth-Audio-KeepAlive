<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="using:KeepAliveApp"
                    xmlns:controls="using:KeepAliveApp.Controls"
                    xmlns:animated="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals"
                    xmlns:primitives="using:Microsoft.UI.Xaml.Controls.Primitives">

  <Style TargetType="controls:DurationPicker">
    <Setter Property="IsTabStop"
            Value="False" />
    <Setter Property="FocusVisualMargin"
            Value="0" />
    <Setter Property="FontFamily"
            Value="{ThemeResource ContentControlThemeFontFamily}" />
    <Setter Property="FontSize"
            Value="{ThemeResource ControlContentThemeFontSize}" />
    <Setter Property="Background"
            Value="{ThemeResource DatePickerButtonBackground}" />
    <Setter Property="Foreground"
            Value="{ThemeResource TimePickerButtonForeground}" />
    <Setter Property="BorderBrush"
            Value="{ThemeResource DatePickerButtonBorderBrush}" />
    <Setter Property="BorderThickness"
            Value="{ThemeResource DatePickerBorderThemeThickness}" />
    <Setter Property="HorizontalAlignment"
            Value="Left" />
    <Setter Property="VerticalAlignment"
            Value="Center" />
    <Setter Property="UseSystemFocusVisuals"
            Value="{StaticResource UseSystemFocusVisuals}" />
    <Setter Property="FocusVisualMargin"
            Value="-3" />
    <Setter Property="CornerRadius"
            Value="{ThemeResource ControlCornerRadius}" />

    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="controls:DurationPicker">
          <Grid x:Name="LayoutRoot"
                Margin="{TemplateBinding Padding}">

            <Grid.Resources>
              <Style x:Key="TimePickerFlyoutButtonStyle"
                     TargetType="Button">
                <Setter Property="ElementSoundMode"
                        Value="FocusOnly" />
                <Setter Property="Template">
                  <Setter.Value>
                    <ControlTemplate TargetType="Button">
                      <Grid>

                        <VisualStateManager.VisualStateGroups>
                          <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />

                            <VisualState x:Name="PointerOver">
                              <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                               Storyboard.TargetProperty="Background">
                                  <DiscreteObjectKeyFrame KeyTime="0"
                                                          Value="{ThemeResource TimePickerButtonBackgroundPointerOver}" />
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                               Storyboard.TargetProperty="Foreground">
                                  <DiscreteObjectKeyFrame KeyTime="0"
                                                          Value="{ThemeResource TimePickerButtonForegroundPointerOver}" />
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                               Storyboard.TargetProperty="BorderBrush">
                                  <DiscreteObjectKeyFrame KeyTime="0"
                                                          Value="{ThemeResource TimePickerButtonBorderBrushPointerOver}" />
                                </ObjectAnimationUsingKeyFrames>
                              </Storyboard>
                            </VisualState>

                            <VisualState x:Name="Pressed">
                              <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                               Storyboard.TargetProperty="Background">
                                  <DiscreteObjectKeyFrame KeyTime="0"
                                                          Value="{ThemeResource TimePickerButtonBackgroundPressed}" />
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                               Storyboard.TargetProperty="Foreground">
                                  <DiscreteObjectKeyFrame KeyTime="0"
                                                          Value="{ThemeResource TimePickerButtonForegroundPressed}" />
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                               Storyboard.TargetProperty="BorderBrush">
                                  <DiscreteObjectKeyFrame KeyTime="0"
                                                          Value="{ThemeResource TimePickerButtonBorderBrushPressed}" />
                                </ObjectAnimationUsingKeyFrames>
                              </Storyboard>
                            </VisualState>

                            <VisualState x:Name="Disabled">
                              <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                               Storyboard.TargetProperty="Background">
                                  <DiscreteObjectKeyFrame KeyTime="0"
                                                          Value="{ThemeResource TimePickerButtonBackgroundDisabled}" />
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                               Storyboard.TargetProperty="Foreground">
                                  <DiscreteObjectKeyFrame KeyTime="0"
                                                          Value="{ThemeResource TimePickerButtonForegroundDisabled}" />
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                               Storyboard.TargetProperty="BorderBrush">
                                  <DiscreteObjectKeyFrame KeyTime="0"
                                                          Value="{ThemeResource TimePickerButtonBorderBrushDisabled}" />
                                </ObjectAnimationUsingKeyFrames>
                              </Storyboard>
                            </VisualState>
                          </VisualStateGroup>
                          <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused" />
                            <VisualState x:Name="Unfocused" />
                          </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <ContentPresenter x:Name="ContentPresenter"
                                          Background="{TemplateBinding Background}"
                                          Foreground="{TemplateBinding Foreground}"
                                          BorderBrush="{TemplateBinding BorderBrush}"
                                          BorderThickness="{TemplateBinding BorderThickness}"
                                          Content="{TemplateBinding Content}"
                                          HorizontalContentAlignment="Stretch"
                                          VerticalContentAlignment="Stretch"
                                          AutomationProperties.AccessibilityView="Raw"
                                          CornerRadius="{TemplateBinding CornerRadius}" />
                      </Grid>
                    </ControlTemplate>
                  </Setter.Value>
                </Setter>
              </Style>
            </Grid.Resources>

            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />

                <VisualState x:Name="Disabled">

                  <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HeaderContentPresenter"
                                                   Storyboard.TargetProperty="Foreground">
                      <DiscreteObjectKeyFrame KeyTime="0"
                                              Value="{ThemeResource TimePickerHeaderForegroundDisabled}" />
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="FirstColumnDivider"
                                                   Storyboard.TargetProperty="Fill">
                      <DiscreteObjectKeyFrame KeyTime="0"
                                              Value="{ThemeResource TimePickerSpacerFillDisabled}" />
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SecondColumnDivider"
                                                   Storyboard.TargetProperty="Fill">
                      <DiscreteObjectKeyFrame KeyTime="0"
                                              Value="{ThemeResource TimePickerSpacerFillDisabled}" />
                    </ObjectAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>

              </VisualStateGroup>
              <VisualStateGroup x:Name="HasTimeStates">
                <VisualState x:Name="HasTime" />
                <VisualState x:Name="HasNoTime">
                  <VisualState.Setters>
                    <Setter Target="FlyoutButton.Foreground"
                            Value="{ThemeResource TimePickerButtonForegroundDefault}" />

                  </VisualState.Setters>
                </VisualState>

              </VisualStateGroup>

            </VisualStateManager.VisualStateGroups>

            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Button x:Name="FlyoutButton"
                    Grid.Row="1"
                    Style="{StaticResource TimePickerFlyoutButtonStyle}"
                    Background="{TemplateBinding Background}"
                    Foreground="{TemplateBinding Foreground}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    IsEnabled="{TemplateBinding IsEnabled}"
                    MinWidth="{StaticResource TimePickerThemeMinWidth}"
                    MaxWidth="{StaticResource TimePickerThemeMaxWidth}"
                    HorizontalAlignment="Stretch"
                    HorizontalContentAlignment="Stretch"
                    VerticalAlignment="Top"
                    FocusVisualMargin="{TemplateBinding FocusVisualMargin}"
                    UseSystemFocusVisuals="{TemplateBinding UseSystemFocusVisuals}"
                    CornerRadius="{TemplateBinding CornerRadius}">
              <Grid x:Name="FlyoutButtonContentGrid">

                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="FirstPickerHostTextBlock"
                           Grid.Column="0"
                           Text="{Binding Duration.Hours, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                           TextAlignment="Center"
                           Padding="{ThemeResource TimePickerHostPadding}"
                           FontFamily="{TemplateBinding FontFamily}"
                           FontWeight="{TemplateBinding FontWeight}"
                           FontSize="{TemplateBinding FontSize}"
                           AutomationProperties.AccessibilityView="Raw" />
                <TextBlock Grid.Column="1"
                           Text="h"
                           Style="{StaticResource CaptionTextBlockStyle}"
                           Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                           VerticalAlignment="Top"
                           Padding="0,0,4,0" />

                <Rectangle x:Name="FirstColumnDivider"
                           Fill="{ThemeResource TimePickerSpacerFill}"
                           HorizontalAlignment="Center"
                           Width="{ThemeResource TimePickerSpacerThemeWidth}"
                           Grid.Column="2" />

                <TextBlock x:Name="SecondPickerHostTextBlock"
                           Grid.Column="3"
                           Text="{Binding Duration.Minutes, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                           TextAlignment="Center"
                           Padding="{ThemeResource TimePickerHostPadding}"
                           FontFamily="{TemplateBinding FontFamily}"
                           FontWeight="{TemplateBinding FontWeight}"
                           FontSize="{TemplateBinding FontSize}"
                           AutomationProperties.AccessibilityView="Raw" />

                <TextBlock Grid.Column="4"
                           Text="m"
                           Style="{StaticResource CaptionTextBlockStyle}"
                           Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                           VerticalAlignment="Top"
                           Padding="0,0,4,0" />

                <Rectangle x:Name="SecondColumnDivider"
                           Fill="{ThemeResource TimePickerSpacerFill}"
                           HorizontalAlignment="Center"
                           Width="{ThemeResource TimePickerSpacerThemeWidth}"
                           Grid.Column="5" />

                <TextBlock x:Name="ThirdPickerHostTextBlock"
                           Grid.Column="6"
                           Text="{Binding Duration.Seconds, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                           TextAlignment="Center"
                           Padding="{ThemeResource TimePickerHostPadding}"
                           FontFamily="{TemplateBinding FontFamily}"
                           FontWeight="{TemplateBinding FontWeight}"
                           FontSize="{TemplateBinding FontSize}"
                           AutomationProperties.AccessibilityView="Raw" />

                <TextBlock Grid.Column="7"
                           Text="s"
                           Style="{StaticResource CaptionTextBlockStyle}"
                           Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                           VerticalAlignment="Top"
                           Padding="0,0,4,0" />
              </Grid>
            </Button>

          </Grid>

        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style TargetType="controls:DurationPickerFlyoutPresenter">
    <Setter Property="Width"
            Value="242" />
    <Setter Property="MinWidth"
            Value="242" />
    <Setter Property="MaxHeight"
            Value="430" />
    <Setter Property="FontFamily"
            Value="{ThemeResource ContentControlThemeFontFamily}" />
    <Setter Property="FontWeight"
            Value="Normal" />
    <Setter Property="IsTabStop"
            Value="False" />
    <Setter Property="Background"
            Value="{ThemeResource TimePickerFlyoutPresenterBackground}" />
    <Setter Property="AutomationProperties.AutomationId"
            Value="TimePickerFlyoutPresenter" />
    <Setter Property="BorderBrush"
            Value="{ThemeResource TimePickerFlyoutPresenterBorderBrush}" />
    <Setter Property="BorderThickness"
            Value="{ThemeResource DateTimeFlyoutBorderThickness}" />
    <Setter Property="CornerRadius"
            Value="{ThemeResource ControlCornerRadius}" />

    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="controls:DurationPickerFlyoutPresenter">
          <Border x:Name="RootBorder"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  CornerRadius="{TemplateBinding CornerRadius}"
                  Padding="{ThemeResource DateTimeFlyoutBorderPadding}"
                  MaxHeight="430">
            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="OpenCloseStates">
                <VisualState x:Name="FlyoutClosed">
                  <VisualState.Setters>
                    <Setter Target="PickerHostGrid.Opacity"
                            Value="0" />
                  </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="FlyoutOpen">
                  <VisualState.Storyboard>
                    <Storyboard x:Name="FlyoutOpenStoryBoard">
                      <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ContentPanelScaleTransform"
                                                     Storyboard.TargetProperty="ScaleY">
                        <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                Value="0.666" />
                        <SplineDoubleKeyFrame KeyTime="0:0:0.167"
                                              KeySpline="0.30,0.30 0,0.95"
                                              Value="1" />
                      </DoubleAnimationUsingKeyFrames>
                      <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ContentPanel"
                                                     Storyboard.TargetProperty="Opacity">
                        <DiscreteDoubleKeyFrame KeyTime="0:0:0"
                                                Value="0" />
                        <SplineDoubleKeyFrame KeyTime="0:0:0.167"
                                              KeySpline="0.30,0.30 0,0.95"
                                              Value="1" />
                      </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                  </VisualState.Storyboard>

                </VisualState>
              </VisualStateGroup>

              <VisualStateGroup x:Name="HostPointerOverStates">
                <VisualState x:Name="HostPointerOverNone" />
                <VisualState x:Name="FirstHostPointerOver">
                  <VisualState.Setters>
                    <Setter Target="FirstPickerHostUpButton.Visibility"
                            Value="Visible" />
                    <Setter Target="FirstPickerHostDownButton.Visibility"
                            Value="Visible" />
                  </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="SecondHostPointerOver">
                  <VisualState.Setters>
                    <Setter Target="SecondPickerHostUpButton.Visibility"
                            Value="Visible" />
                    <Setter Target="SecondPickerHostDownButton.Visibility"
                            Value="Visible" />
                  </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="ThirdHostPointerOver">
                  <VisualState.Setters>
                    <Setter Target="ThirdPickerHostUpButton.Visibility"
                            Value="Visible" />
                    <Setter Target="ThirdPickerHostDownButton.Visibility"
                            Value="Visible" />
                  </VisualState.Setters>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>

            <Grid x:Name="ContentPanel"
                  RenderTransformOrigin="0.5,0.5">

              <Grid.RenderTransform>
                <ScaleTransform x:Name="ContentPanelScaleTransform" />
              </Grid.RenderTransform>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
              </Grid.RowDefinitions>

              <Grid Grid.Row="0"
                    x:Name="HeaderHostGrid"
                    Height="32">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="hour"
                           Grid.Column="0"
                           TextAlignment="Center"
                           VerticalAlignment="Center"
                           Padding="0,0,0,4" />
                <Rectangle Fill="{ThemeResource TimePickerFlyoutPresenterSpacerFill}"
                           HorizontalAlignment="Center"
                           Width="{ThemeResource TimePickerSpacerThemeWidth}"
                           Grid.Column="1" />
                <TextBlock Text="minute"
                           Grid.Column="2"
                           TextAlignment="Center"
                           VerticalAlignment="Center"
                           Padding="0,0,0,4" />
                <Rectangle Fill="{ThemeResource TimePickerFlyoutPresenterSpacerFill}"
                           HorizontalAlignment="Center"
                           Width="{ThemeResource TimePickerSpacerThemeWidth}"
                           Grid.Column="3" />
                <TextBlock Text="second"
                           Grid.Column="4"
                           TextAlignment="Center"
                           VerticalAlignment="Center"
                           Padding="0,0,0,4" />

                <Rectangle Fill="{ThemeResource TimePickerFlyoutPresenterSpacerFill}"
                           VerticalAlignment="Bottom"
                           Height="{ThemeResource TimePickerSpacerThemeWidth}"
                           Grid.ColumnSpan="5" />
              </Grid>

              <Grid x:Name="PickerHostGrid"
                    Grid.Row="1"
                    Opacity="0">
                <Grid.Resources>
                  <DataTemplate x:Key="PickerHostItemsRepeaterTemplate">
                    <Grid Height="40"
                          Width="80">
                      <Grid.Resources>
                        <SolidColorBrush x:Key="ButtonBackground"
                                         Color="{ThemeResource SubtleFillColorTransparent}" />
                        <SolidColorBrush x:Key="ButtonBackgroundPointerOver"
                                         Color="{ThemeResource SubtleFillColorSecondary}" />
                        <SolidColorBrush x:Key="ButtonBackgroundPressed"
                                         Color="{ThemeResource SubtleFillColorTertiary}" />
                        <SolidColorBrush x:Key="ButtonBackgroundDisabled"
                                         Color="{ThemeResource SubtleFillColorDisabled}" />
                      </Grid.Resources>

                      <Button Content="{Binding}"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Stretch"
                              BorderThickness="0"
                              Margin="4,0,4,4" />
                    </Grid>
                  </DataTemplate>

                  <Style x:Key="PickerHostScrollButtonStyle"
                         TargetType="RepeatButton"
                         BasedOn="{StaticResource DefaultRepeatButtonStyle}">
                    <Setter Property="Visibility"
                            Value="Collapsed" />
                    <Setter Property="Interval"
                            Value="50" />
                    <Setter Property="Height"
                            Value="36" />
                    <Setter Property="HorizontalAlignment"
                            Value="Stretch" />
                    <Setter Property="Background"
                            Value="{ThemeResource SolidBackgroundFillColorBaseBrush}" />
                    <Setter Property="Foreground"
                            Value="{ThemeResource ScrollButtonForeground}" />
                    <Setter Property="BorderBrush"
                            Value="{ThemeResource ScrollButtonBorderBrush}" />
                    <Setter Property="BorderThickness"
                            Value="{ThemeResource ScrollButtonStyleBorderThickness}" />
                    <Setter Property="CornerRadius"
                            Value="0" />
                    <Setter Property="FontFamily"
                            Value="{ThemeResource SymbolThemeFontFamily}" />
                    <Setter Property="FontSize"
                            Value="8" />
                    <Setter Property="Template">
                      <Setter.Value>
                        <ControlTemplate TargetType="RepeatButton">
                          <ContentPresenter x:Name="ContentPresenter"
                                            Background="{TemplateBinding Background}"
                                            BackgroundSizing="{TemplateBinding BackgroundSizing}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            Content="{TemplateBinding Content}"
                                            ContentTemplate="{TemplateBinding ContentTemplate}"
                                            ContentTransitions="{TemplateBinding ContentTransitions}"
                                            Padding="{TemplateBinding Padding}"
                                            CornerRadius="{TemplateBinding CornerRadius}"
                                            HighContrastAdjustment="None"
                                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                            VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                            AutomationProperties.AccessibilityView="Raw">

                            <VisualStateManager.VisualStateGroups>
                              <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">

                                  <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                   Storyboard.TargetProperty="Foreground">
                                      <DiscreteObjectKeyFrame KeyTime="0"
                                                              Value="{ThemeResource ScrollButtonForeground}" />
                                    </ObjectAnimationUsingKeyFrames>
                                  </Storyboard>
                                </VisualState>

                                <VisualState x:Name="PointerOver">

                                  <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                   Storyboard.TargetProperty="Foreground">
                                      <DiscreteObjectKeyFrame KeyTime="0"
                                                              Value="{ThemeResource ScrollButtonForegroundPointerOver}" />
                                    </ObjectAnimationUsingKeyFrames>
                                  </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">

                                  <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                   Storyboard.TargetProperty="Foreground">
                                      <DiscreteObjectKeyFrame KeyTime="0"
                                                              Value="{ThemeResource ScrollButtonForegroundPressed}" />
                                    </ObjectAnimationUsingKeyFrames>
                                  </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">

                                  <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                   Storyboard.TargetProperty="Foreground">
                                      <DiscreteObjectKeyFrame KeyTime="0"
                                                              Value="{ThemeResource ScrollButtonForegroundDisabled}" />
                                    </ObjectAnimationUsingKeyFrames>
                                  </Storyboard>
                                </VisualState>

                              </VisualStateGroup>

                            </VisualStateManager.VisualStateGroups>
                          </ContentPresenter>

                        </ControlTemplate>
                      </Setter.Value>
                    </Setter>
                  </Style>

                </Grid.Resources>

                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Grid x:Name="HighlightRect"
                      Canvas.ZIndex="9999"
                      Background="{ThemeResource TimePickerFlyoutPresenterHighlightFill}"
                      CornerRadius="{TemplateBinding CornerRadius}"
                      Grid.Column="0"
                      Grid.ColumnSpan="5"
                      VerticalAlignment="Center"
                      Height="{ThemeResource TimePickerFlyoutPresenterHighlightHeight}"
                      Margin="4,2,4,2"
                      IsHitTestVisible="false" />

                <primitives:MonochromaticOverlayPresenter Canvas.ZIndex="10000"
                                                          Grid.Column="0"
                                                          Margin="3,0"
                                                          SourceElement="{Binding ElementName=FirstPickerHost, Mode=OneTime}"
                                                          ReplacementColor="{ThemeResource TimePickerFlyoutPresenterHighlightForegroundColor}"
                                                          Height="{ThemeResource TimePickerFlyoutPresenterHighlightHeight}"
                                                          Background="{ThemeResource TimePickerFlyoutPresenterHighlightFill}"
                                                          CornerRadius="{TemplateBinding CornerRadius}"
                                                          VerticalAlignment="Center"
                                                          IsHitTestVisible="false" />
                <primitives:MonochromaticOverlayPresenter Canvas.ZIndex="10000"
                                                          Grid.Column="2"
                                                          Margin="3,0"
                                                          SourceElement="{Binding ElementName=SecondPickerHost}"
                                                          ReplacementColor="{ThemeResource TimePickerFlyoutPresenterHighlightForegroundColor}"
                                                          Height="{ThemeResource TimePickerFlyoutPresenterHighlightHeight}"
                                                          Background="{ThemeResource TimePickerFlyoutPresenterHighlightFill}"
                                                          CornerRadius="{TemplateBinding CornerRadius}"
                                                          VerticalAlignment="Center"
                                                          IsHitTestVisible="false" />
                <primitives:MonochromaticOverlayPresenter Canvas.ZIndex="10000"
                                                          Grid.Column="4"
                                                          Margin="3,0"
                                                          SourceElement="{Binding ElementName=ThirdPickerHost}"
                                                          ReplacementColor="{ThemeResource TimePickerFlyoutPresenterHighlightForegroundColor}"
                                                          Height="{ThemeResource TimePickerFlyoutPresenterHighlightHeight}"
                                                          Background="{ThemeResource TimePickerFlyoutPresenterHighlightFill}"
                                                          CornerRadius="{TemplateBinding CornerRadius}"
                                                          VerticalAlignment="Center"
                                                          IsHitTestVisible="false" />
                <Grid x:Name="FirstPickerHost"
                      Grid.Column="0">
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                  </Grid.RowDefinitions>

                  <primitives:ScrollPresenter x:Name="FirstPickerHostScrollPresenter"
                                              Grid.Row="0"
                                              Grid.RowSpan="3"
                                              ContentOrientation="Vertical"
                                              VerticalScrollMode="Enabled">
                    <ItemsRepeater x:Name="FirstPickerHostItemsRepeater"
                                   ItemTemplate="{StaticResource PickerHostItemsRepeaterTemplate}">
                      <ItemsRepeater.Layout>
                        <ColumnMajorUniformToLargestGridLayout MaxColumns="1" />
                      </ItemsRepeater.Layout>
                    </ItemsRepeater>
                  </primitives:ScrollPresenter>

                  <RepeatButton x:Name="FirstPickerHostUpButton"
                                Grid.Row="0"
                                Style="{StaticResource PickerHostScrollButtonStyle}">
                    <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}"
                              Glyph="&#xEDDB;"
                              Foreground="{ThemeResource ScrollBarButtonArrowForeground}"
                              FontSize="{StaticResource ScrollBarButtonArrowIconFontSize}" />
                  </RepeatButton>

                  <RepeatButton x:Name="FirstPickerHostDownButton"
                                Grid.Row="2"
                                Style="{StaticResource PickerHostScrollButtonStyle}">
                    <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}"
                              Glyph="&#xEDDC;"
                              Foreground="{ThemeResource ScrollBarButtonArrowForeground}"
                              FontSize="{StaticResource ScrollBarButtonArrowIconFontSize}" />
                  </RepeatButton>
                </Grid>

                <Rectangle x:Name="FirstPickerSpacing"
                           Canvas.ZIndex="10000"
                           Fill="{ThemeResource TimePickerFlyoutPresenterSpacerFill}"
                           HorizontalAlignment="Center"
                           Width="{ThemeResource TimePickerSpacerThemeWidth}"
                           Grid.Column="1" />

                <Grid x:Name="SecondPickerHost"
                      Grid.Column="2">
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                  </Grid.RowDefinitions>

                  <primitives:ScrollPresenter x:Name="SecondPickerHostScrollPresenter"
                                              Grid.Row="0"
                                              Grid.RowSpan="3"
                                              ContentOrientation="Vertical"
                                              VerticalScrollMode="Enabled">
                    <ItemsRepeater x:Name="SecondPickerHostItemsRepeater"
                                   ItemTemplate="{StaticResource PickerHostItemsRepeaterTemplate}">
                      <ItemsRepeater.Layout>
                        <ColumnMajorUniformToLargestGridLayout MaxColumns="1" />
                      </ItemsRepeater.Layout>
                    </ItemsRepeater>
                  </primitives:ScrollPresenter>

                  <RepeatButton x:Name="SecondPickerHostUpButton"
                                Grid.Row="0"
                                Style="{StaticResource PickerHostScrollButtonStyle}">
                    <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}"
                              Glyph="&#xEDDB;"
                              Foreground="{ThemeResource ScrollBarButtonArrowForeground}"
                              FontSize="{StaticResource ScrollBarButtonArrowIconFontSize}" />
                  </RepeatButton>

                  <RepeatButton x:Name="SecondPickerHostDownButton"
                                Grid.Row="2"
                                Style="{StaticResource PickerHostScrollButtonStyle}">
                    <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}"
                              Glyph="&#xEDDC;"
                              Foreground="{ThemeResource ScrollBarButtonArrowForeground}"
                              FontSize="{StaticResource ScrollBarButtonArrowIconFontSize}" />
                  </RepeatButton>
                </Grid>

                <Rectangle x:Name="SecondPickerSpacing"
                           Canvas.ZIndex="10000"
                           Fill="{ThemeResource TimePickerFlyoutPresenterSpacerFill}"
                           HorizontalAlignment="Center"
                           Width="{ThemeResource TimePickerSpacerThemeWidth}"
                           Grid.Column="3" />

                <Grid x:Name="ThirdPickerHost"
                      Grid.Column="4">
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                  </Grid.RowDefinitions>

                  <primitives:ScrollPresenter x:Name="ThirdPickerHostScrollPresenter"
                                              Grid.Row="0"
                                              Grid.RowSpan="3"
                                              ContentOrientation="Vertical"
                                              VerticalScrollMode="Enabled">
                    <ItemsRepeater x:Name="ThirdPickerHostItemsRepeater"
                                   ItemTemplate="{StaticResource PickerHostItemsRepeaterTemplate}">
                      <ItemsRepeater.Layout>
                        <ColumnMajorUniformToLargestGridLayout MaxColumns="1" />
                      </ItemsRepeater.Layout>
                    </ItemsRepeater>
                  </primitives:ScrollPresenter>

                  <RepeatButton x:Name="ThirdPickerHostUpButton"
                                Grid.Row="0"
                                Style="{StaticResource PickerHostScrollButtonStyle}">
                    <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}"
                              Glyph="&#xEDDB;"
                              Foreground="{ThemeResource ScrollBarButtonArrowForeground}"
                              FontSize="{StaticResource ScrollBarButtonArrowIconFontSize}" />
                  </RepeatButton>

                  <RepeatButton x:Name="ThirdPickerHostDownButton"
                                Grid.Row="2"
                                Style="{StaticResource PickerHostScrollButtonStyle}">
                    <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}"
                              Glyph="&#xEDDC;"
                              Foreground="{ThemeResource ScrollBarButtonArrowForeground}"
                              FontSize="{StaticResource ScrollBarButtonArrowIconFontSize}" />
                  </RepeatButton>
                </Grid>

              </Grid>

              <Grid Grid.Row="2"
                    Height="{ThemeResource TimePickerFlyoutPresenterAcceptDismissHostGridHeight}"
                    x:Name="AcceptDismissHostGrid">

                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Rectangle Height="{ThemeResource TimePickerSpacerThemeWidth}"
                           VerticalAlignment="Top"
                           Fill="{ThemeResource TimePickerFlyoutPresenterSpacerFill}"
                           Grid.ColumnSpan="2" />
                <Button x:Name="AcceptButton"
                        Grid.Column="0"
                        Content="&#xE8FB;"
                        FontFamily="{ThemeResource SymbolThemeFontFamily}"
                        FontSize="16"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Margin="{StaticResource DatePickerFlyoutPresenterDismissMargin}"
                        Padding="4"
                        Style="{StaticResource DateTimePickerFlyoutButtonStyle}" />
                <Button x:Name="DismissButton"
                        Grid.Column="1"
                        Content="&#xE711;"
                        FontFamily="{ThemeResource SymbolThemeFontFamily}"
                        FontSize="16"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Margin="{StaticResource DatePickerFlyoutPresenterDismissMargin}"
                        Padding="4"
                        Style="{StaticResource DateTimePickerFlyoutButtonStyle}" />
              </Grid>

            </Grid>
          </Border>

        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>

